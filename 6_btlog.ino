int inbuffer;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void btsetup() {
  ESP_BT.begin("ESP32_DataLog"); //Name of your Bluetooth Signal
  Serial.println("Bluetooth Device is Ready to Pair");
  tft.drawString("Ready to Pair", 10, 10, 4);
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void sendBT() {
  if (ESP_BT.available()) { //Check if we receive anything from Bluetooth
    inbuffer = ESP_BT.read();
    if (inbuffer > 47 and inbuffer < 50)
      incoming = inbuffer;
  }
//  Serial.println(btstatus);
  if (incoming == 49) {
    printinBT();
    btstatus = 1; //sending
  }
  else btstatus = 0;
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void printinBT() {
  {
    ESP_BT.print(AcX);
    ESP_BT.print(",");
    ESP_BT.print(AcY);
    ESP_BT.print(",");
    ESP_BT.print(AcZ);
    ESP_BT.print(",");
  }
  {
    ESP_BT.print(GyX);
    ESP_BT.print(",");
    ESP_BT.print(GyY);
    ESP_BT.print(",");
    ESP_BT.println(GyZ);
  }
  GyNet = sqrt(sq(GyX) + sq(GyY) + sq(GyZ));
  Serial.println(GyNet);
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void TFTPrintBT() {
  tft.drawString("BT Status", 120, 0, 4);
  if (btstatus != lastbtstatus or tftupdate == 1){
    lastbtstatus = btstatus;
    switch (btstatus) {
      case 0:
        tft.drawString("Stopped", 120, 70, 4);
        break;
      case 1:
        tft.drawString("Sending", 120, 70, 4);
        break;
      case 2:
        tft.drawString("To pair", 120, 60, 4);
        break;
    }
    tftupdate = 0;
  }
}
